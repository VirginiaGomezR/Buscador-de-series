"use strict";const endpointSeries="http://api.tvmaze.com/search/shows?q=",emptyImage="https://via.placeholder.com/210x295/ffffff/666666/?text=TV",searchButton=document.querySelector(".js__search--button"),resetButton=document.querySelector(".js-reset");let series=[],favorites=[];const setItemLocalStorage=()=>{localStorage.setItem("favorites",JSON.stringify(favorites))},getItemLocalStorage=()=>{const e=JSON.parse(localStorage.getItem("favorites"));null!==e&&(favorites=e)},seriesContentFilter=e=>{series=[];for(const t of e){let e={name:t.show.name,image:t.show.image,id:t.show.id};series.push(e)}};function savedFavourites(e){if(void 0===favorites.find(t=>t.id===parseInt(e.currentTarget.id))){const t=series.find(t=>t.id===parseInt(e.currentTarget.id));void 0!==t&&(favorites.push(t),setItemLocalStorage())}}function deleteFavourites(e){favorites=favorites.filter(t=>t.id!==parseInt(e.currentTarget.id)),setItemLocalStorage()}const paintList=()=>{const e=document.querySelector(".js-list");e.innerHTML="";for(const t of series){const i=document.createElement("li");void 0!==favorites.find(e=>e.id===t.id)&&i.classList.add("background");const s=document.createElement("h3");s.classList.add("js-name");const a=document.createElement("img");a.classList.add("js-image"),i.setAttribute("id",t.id),s.innerHTML=t.name,a.innerHTML=t.image,null===t.image?a.src=emptyImage:a.src=t.image.medium,a.alt="Imagen de serie",e.appendChild(i),i.appendChild(s),i.appendChild(a),i.addEventListener("click",handlerFavouriteList)}};function paintFavouriteList(){const e=document.querySelector(".js-favorites-list");e.innerHTML="";for(const t of favorites){const i=document.createElement("li");i.classList.add("js-list-li"),i.setAttribute("id",t.id);const s=document.createElement("h3");s.classList.add("js-name-favorites");const a=document.createElement("img");a.classList.add("js-image-favorites");const n=document.createElement("span");n.classList.add("js-delete"),n.setAttribute("id",t.id),n.innerHTML="x",s.innerHTML=t.name,a.innerHTML=t.image,null===t.image?a.src=emptyImage:a.src=t.image.medium,a.alt="Imagen de serie favorita",e.appendChild(i),i.appendChild(n),i.appendChild(s),i.appendChild(a),n.addEventListener("click",handlerDeleteFavourites)}}function handlerFavouriteList(e){savedFavourites(e),paintFavouriteList(),paintList()}function handlerDeleteFavourites(e){deleteFavourites(e),paintFavouriteList(),paintList()}const getSeriesFromApi=()=>{const e=document.querySelector(".js-input").value;fetch(`${endpointSeries}${e}`).then(e=>e.json()).then(e=>seriesContentFilter(e)).then(()=>paintList())};function resetFavorites(){favorites=[],localStorage.removeItem("favorites"),paintFavouriteList(),paintList()}searchButton.addEventListener("click",getSeriesFromApi),resetButton.addEventListener("click",resetFavorites),getItemLocalStorage(),paintFavouriteList();